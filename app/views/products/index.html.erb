<h1>Products</h1>

<% if flash[:errors] && flash[:errors].any? %>
	<div class="row">
	  <div id="error_explanation">
	    <h2>
	      <%= pluralize(flash[:errors].count, "error") %>
	    </h2>
	    <ul>
	      <% flash[:errors].each do |msg| %>
	        <li><%= msg %></li>
	      <% end %>
	    </ul>
	  </div>
  </div>
<% end %>

<div class="row">
	<div class="col-lg-12">
		<%= link_to 'New Product', new_product_path, class: 'btn btn-primary' %>
	</div>
</div>
<div class="row">
	&nbsp;
</div>
<div class="row">
	<div class="col-lg-12">
		<table class="table table-striped">
			<tr>
					<th>Name</th>
					<th>Categories</th>
					<th>Ingredients</th>
					<th>Retail Options</th>
					<th>&nbsp;</th>
			</tr>
			<% @products.each do |product| %>
			<tr>
				<td><%= product.name %></td>
				<td>
					<%= product.categories.map(&:name).join(", ") %>
				</td>
				<td>
					<%= product.supplies.map(&:name).join(", ") %>
				</td>
				<td>
					<%= product.retail_options.map(&:name).join(", ") %>
				</td>
				<td>
					<%= link_to "Show", product_path(product), class: 'btn btn-default btn-xs' %>
					<%= link_to "Edit", edit_product_path(product), class: 'btn btn-default btn-xs' %>
					<%= link_to "Remove", product_path(product),
						method: :delete, class: 'btn btn-default btn-xs',
						data: { confirm: 'Are you sure?' } %>
				</td>
			</tr>
			<% end %>
		</table>
	</div>
</div>


